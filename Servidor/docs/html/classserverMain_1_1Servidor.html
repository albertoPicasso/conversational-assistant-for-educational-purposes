<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Servidor-Profesor Idiomas NPL: Referencia de la Clase serverMain.Servidor</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Servidor-Profesor Idiomas NPL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generado por Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Buscar');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Buscar');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><b>serverMain</b></li><li class="navelem"><a class="el" href="classserverMain_1_1Servidor.html">Servidor</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Métodos públicos</a> &#124;
<a href="#pub-attribs">Atributos públicos</a> &#124;
<a href="classserverMain_1_1Servidor-members.html">Lista de todos los miembros</a>  </div>
  <div class="headertitle">
<div class="title">Referencia de la Clase serverMain.Servidor</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Métodos públicos</h2></td></tr>
<tr class="memitem:a4f55444203f6101e7fe372d7b1258b4d"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a4f55444203f6101e7fe372d7b1258b4d">__init__</a> (self)</td></tr>
<tr class="separator:a4f55444203f6101e7fe372d7b1258b4d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4092658fab5fdb52bb65c470e781756c"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a4092658fab5fdb52bb65c470e781756c">run</a> (self, language=&quot;es&quot;, stt=&quot;local&quot;, whisperSize=&quot;small&quot;, llm=&quot;remoto&quot;, localModels=&quot;Gemma&quot;, tts=&quot;local&quot;, port=5000)</td></tr>
<tr class="separator:a4092658fab5fdb52bb65c470e781756c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a61680534410880b65f1b672ba38822e1"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a61680534410880b65f1b672ba38822e1">register_new_user</a> (self)</td></tr>
<tr class="separator:a61680534410880b65f1b672ba38822e1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a241f87915fe02fbda12efde0a4bd9276"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a241f87915fe02fbda12efde0a4bd9276">logIn</a> (self)</td></tr>
<tr class="separator:a241f87915fe02fbda12efde0a4bd9276"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a66c047af2a78b2b9d5bc709b9b0c0f15"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a66c047af2a78b2b9d5bc709b9b0c0f15">register_user_session</a> (self)</td></tr>
<tr class="separator:a66c047af2a78b2b9d5bc709b9b0c0f15"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42a59d6db3f6d291501f981584ef7023"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a42a59d6db3f6d291501f981584ef7023">upload_wav</a> (self)</td></tr>
<tr class="separator:a42a59d6db3f6d291501f981584ef7023"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a339901e2d2880a8962fa6879c9affb8a"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a339901e2d2880a8962fa6879c9affb8a">logout</a> (self)</td></tr>
<tr class="separator:a339901e2d2880a8962fa6879c9affb8a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4cb218eb7c1161702ee724ffa5584ac6"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a4cb218eb7c1161702ee724ffa5584ac6">delete_user</a> (self)</td></tr>
<tr class="separator:a4cb218eb7c1161702ee724ffa5584ac6"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18e9d482cc108045fd6378b3a4d394db"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a18e9d482cc108045fd6378b3a4d394db">ping</a> (self)</td></tr>
<tr class="separator:a18e9d482cc108045fd6378b3a4d394db"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Atributos públicos</h2></td></tr>
<tr class="memitem:aa93280d9b91d2b099430e6c1707d7335"><td class="memItemLeft" align="right" valign="top"><a id="aa93280d9b91d2b099430e6c1707d7335"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#aa93280d9b91d2b099430e6c1707d7335">app</a></td></tr>
<tr class="memdesc:aa93280d9b91d2b099430e6c1707d7335"><td class="mdescLeft">&#160;</td><td class="mdescRight">Server configs. <br /></td></tr>
<tr class="separator:aa93280d9b91d2b099430e6c1707d7335"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aff063d208e1dfcffd8d4f6e9c7b93f8e"><td class="memItemLeft" align="right" valign="top"><a id="aff063d208e1dfcffd8d4f6e9c7b93f8e"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>aux</b></td></tr>
<tr class="separator:aff063d208e1dfcffd8d4f6e9c7b93f8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a5be126b04423c43c6c77a2c55f0e1b"><td class="memItemLeft" align="right" valign="top"><a id="a8a5be126b04423c43c6c77a2c55f0e1b"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>lang</b></td></tr>
<tr class="separator:a8a5be126b04423c43c6c77a2c55f0e1b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0f581e44f9ab20076664a965bf101e09"><td class="memItemLeft" align="right" valign="top"><a id="a0f581e44f9ab20076664a965bf101e09"></a>
&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classserverMain_1_1Servidor.html#a0f581e44f9ab20076664a965bf101e09">systemMessage</a></td></tr>
<tr class="memdesc:a0f581e44f9ab20076664a965bf101e09"><td class="mdescLeft">&#160;</td><td class="mdescRight">Interface Config. <br /></td></tr>
<tr class="separator:a0f581e44f9ab20076664a965bf101e09"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5c7e35aaf35ca76b449b7bcfeb06fae5"><td class="memItemLeft" align="right" valign="top"><a id="a5c7e35aaf35ca76b449b7bcfeb06fae5"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>STT</b></td></tr>
<tr class="separator:a5c7e35aaf35ca76b449b7bcfeb06fae5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4d14cebea944119ea8ba35026bb210a0"><td class="memItemLeft" align="right" valign="top"><a id="a4d14cebea944119ea8ba35026bb210a0"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>LLM</b></td></tr>
<tr class="separator:a4d14cebea944119ea8ba35026bb210a0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa277efb37b262d70ca89e8a85e4b085a"><td class="memItemLeft" align="right" valign="top"><a id="aa277efb37b262d70ca89e8a85e4b085a"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>TTS</b></td></tr>
<tr class="separator:aa277efb37b262d70ca89e8a85e4b085a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a940abd152e13dfa221d7d51cdd9d20dd"><td class="memItemLeft" align="right" valign="top"><a id="a940abd152e13dfa221d7d51cdd9d20dd"></a>
&#160;</td><td class="memItemRight" valign="bottom"><b>teacherMode</b></td></tr>
<tr class="separator:a940abd152e13dfa221d7d51cdd9d20dd"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Documentación del constructor y destructor</h2>
<a id="a4f55444203f6101e7fe372d7b1258b4d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4f55444203f6101e7fe372d7b1258b4d">&#9670;&nbsp;</a></span>__init__()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.__init__ </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Inicializa la configuración del servidor y configura las rutas y la base de datos.

Este constructor realiza las siguientes acciones:
- Inicializa una aplicación Flask.
- Establece una clave secreta para la aplicación Flask.
- Inicializa funciones auxiliares.
- Agrega reglas de URL para varios endpoints.
- Crea una carpeta para datos temporales de usuarios si no existe.
- Crea una base de datos para datos de usuarios si no existe y agrega un usuario predeterminado.

Atributos:
    app (Flask): La instancia de la aplicación Flask.
    aux (Aux_functions): Una instancia de funciones auxiliares para varias operaciones de utilidad.

Raises:
    sqlite3.Error: Si hay un error al agregar el usuario predeterminado a la base de datos.
</pre> 
</div>
</div>
<h2 class="groupheader">Documentación de las funciones miembro</h2>
<a id="a4cb218eb7c1161702ee724ffa5584ac6"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4cb218eb7c1161702ee724ffa5584ac6">&#9670;&nbsp;</a></span>delete_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.delete_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Elimina un usuario basado en los datos JSON recibidos en la solicitud.

Este método extrae el nombre de usuario y la contraseña de una carga útil JSON, intenta eliminar al usuario
de la base de datos y maneja cualquier error potencial durante el proceso. También registra el éxito
o fracaso del intento de eliminación.

Returns:
    tuple: Una tupla que contiene un mensaje y un código de estado HTTP.
- "User deleted", 200: Si el usuario se elimina con éxito.
- "User not found", 400: Si el usuario no se encuentra o la eliminación falla.
- "An error occurred: {error_message}", 500: Si ocurre una excepción no manejada.
</pre> 
</div>
</div>
<a id="a241f87915fe02fbda12efde0a4bd9276"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a241f87915fe02fbda12efde0a4bd9276">&#9670;&nbsp;</a></span>logIn()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.logIn </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Autentica a un usuario basado en los datos JSON recibidos en la solicitud.

Este método extrae el nombre de usuario y la contraseña de una carga útil JSON, verifica las credenciales del usuario
y maneja el proceso de inicio de sesión. También registra el éxito o fracaso del intento de inicio de sesión.

Returns:
    tuple: Una tupla que contiene un mensaje y un código de estado HTTP.
- "Verifing user: OK", 200: Si el usuario se autentica con éxito.
- "Verifing user: NOT OK", 401: Si la autenticación falla.
- "something failed", 500: Si el formato de la solicitud es incorrecto o ocurre una excepción no manejada.
</pre> 
</div>
</div>
<a id="a339901e2d2880a8962fa6879c9affb8a"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a339901e2d2880a8962fa6879c9affb8a">&#9670;&nbsp;</a></span>logout()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.logout </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Cierra la sesión del usuario eliminando el ID de usuario de la sesión y borrando el directorio de datos temporales del usuario.

Este método realiza las siguientes acciones:
- Verifica si el usuario está autenticado.
- Elimina el ID de usuario de la sesión.
- Borra el directorio de datos temporales del usuario.
- Registra el cierre de sesión exitoso.

Returns:
    tuple: Una tupla que contiene un mensaje y un código de estado HTTP.
- 'Logout successfully.', 200: Si el usuario cierra sesión con éxito.
- 'An error occurred: {error_message}', 500: Si ocurre una excepción no manejada durante el cierre de sesión.
</pre> 
</div>
</div>
<a id="a18e9d482cc108045fd6378b3a4d394db"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18e9d482cc108045fd6378b3a4d394db">&#9670;&nbsp;</a></span>ping()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.ping </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Endpoint simple de verificación de estado que responde con 'pong'.

Returns:
    str: La cadena "pong".
</pre> 
</div>
</div>
<a id="a61680534410880b65f1b672ba38822e1"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a61680534410880b65f1b672ba38822e1">&#9670;&nbsp;</a></span>register_new_user()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.register_new_user </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Registra un nuevo usuario basado en los datos JSON recibidos en la solicitud.

Este método extrae la información del usuario de una carga útil JSON, intenta agregar al usuario
a la base de datos y maneja cualquier error potencial durante el proceso. También registra
el éxito o fracaso del intento de registro.

Returns:
    tuple: Una tupla que contiene un mensaje y un código de estado HTTP.
- "ok", 200: Si el usuario se registra con éxito.
- "User already exist", 409: Si se intenta registrar un usuario existente.
- "Something gone wrong", 500: Si ocurre una excepción no manejada.
</pre> 
</div>
</div>
<a id="a66c047af2a78b2b9d5bc709b9b0c0f15"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a66c047af2a78b2b9d5bc709b9b0c0f15">&#9670;&nbsp;</a></span>register_user_session()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.register_user_session </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Registra una nueva sesión de usuario e inicializa el estado de la sesión.

Este método asigna un ID de usuario único a la sesión si aún no lo tiene,
inicializa el estado de la sesión y los mensajes, agrega un mensaje del sistema al chat,
crea un directorio de usuario y registra el éxito o fracaso del registro.

Returns:
    tuple: Una tupla que contiene un mensaje y un código de estado HTTP.
- 'User {user_id} registered successfully.', 200: Si la sesión de usuario se registra con éxito.
- 'Error registering user: {error_message}', 500: Si ocurre una excepción no manejada durante el registro.
</pre> 
</div>
</div>
<a id="a4092658fab5fdb52bb65c470e781756c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a4092658fab5fdb52bb65c470e781756c">&#9670;&nbsp;</a></span>run()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.run </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>language</em> = <code>&quot;es&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>stt</em> = <code>&quot;local&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>whisperSize</em> = <code>&quot;small&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>llm</em> = <code>&quot;remoto&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>localModels</em> = <code>&quot;Gemma&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>tts</em> = <code>&quot;local&quot;</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>port</em> = <code>5000</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Ejecuta el servidor Flask con las configuraciones especificadas.

Este método configura el registro, inicializa varios componentes del sistema (como STT, LLM y TTS)
y arranca el servidor Flask.

Args:
    language (str, optional): La configuración de idioma para el sistema. Por defecto es "es".
    stt (str, optional): El servicio de reconocimiento de voz a texto a utilizar. Por defecto es "local".
    whisperSize (str, optional): El tamaño del modelo Whisper a utilizar para STT. Por defecto es "small".
    llm (str, optional): El modelo de lenguaje grande a utilizar. Por defecto es "remoto".
    localModels (str, optional): Los modelos locales a utilizar. Por defecto es "Gemma".
    tts (str, optional): El servicio de texto a voz a utilizar. Por defecto es "local".
    port (int, optional): El puerto en el que se ejecutará el servidor Flask. Por defecto es 5000.

Raises:
    Exception: Si ocurre una excepción no manejada durante la inicialización de los componentes del sistema.
</pre> 
</div>
</div>
<a id="a42a59d6db3f6d291501f981584ef7023"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42a59d6db3f6d291501f981584ef7023">&#9670;&nbsp;</a></span>upload_wav()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def serverMain.Servidor.upload_wav </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>self</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<pre class="fragment">Maneja la carga de un archivo WAV, transcribe su contenido, interactúa con el modelo de lenguaje
y devuelve una respuesta sintetizada.

Este método realiza las siguientes acciones:
- Verifica si el usuario está autenticado.
- Valida la presencia y selección de un archivo WAV en la solicitud.
- Guarda el archivo WAV cargado en un directorio temporal.
- Transcribe el archivo WAV a texto utilizando el sistema STT.
- Agrega el texto transcrito al historial del chat.
- Envía el historial del chat a un modelo de lenguaje y recibe una respuesta.
- Verifica si la conversación ha terminado y prepara un mensaje de evaluación si es necesario.
- Agrega la respuesta del asistente al historial del chat.
- Convierte la respuesta a voz utilizando el sistema TTS.
- Codifica la respuesta de audio en base64 y la devuelve junto con una bandera de fin de conversación.

Returns:
    Response: Una respuesta JSON que contiene el audio codificado y la bandera de fin de conversación, o un mensaje de error y un código de estado.
</pre> 
</div>
</div>
<hr/>La documentación para esta clase fue generada a partir del siguiente fichero:<ul>
<li>Servidor/serverMain.py</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generado por &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
